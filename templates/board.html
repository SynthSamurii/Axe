<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Board</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        .target-container, .zombies-container {
            position: absolute;
            width: 80vw;
            height: 80vw;
            max-width: 800px;
            max-height: 800px;
            display: none;
        }

        .target-container {
            position: relative;
            width: 80vw;
            height: 80vw;
            max-width: 800px;
            max-height: 800px;
            background: radial-gradient(circle, 
                #ffffff 8.33%, 
                #ff0000 8.33%, 
                #ff0000 25%, 
                #ffcc00 25%, 
                #ffcc00 41.67%, 
                #0000ff 41.67%, 
                #0000ff 58.33%, 
                #00ff00 58.33%);
            border-radius: 50%;
            margin-top: 20px;
        }

        .bullseye {
            position: absolute;
            width: 16.67%;
            height: 16.67%;
            background: #ffffff;
            border-radius: 50%;
            top: 41.67%;
            left: 41.67%;
        }

        .clutch {
            position: absolute;
            width: 8.33%;
            height: 8.33%;
            background: #ff00ff; /* Different color for clutch */
            border-radius: 50%;
        }

        .clutch.left {
            top: 16.67%;
            left: 16.67%;
        }

        .clutch.right {
            top: 16.67%;
            right: 16.67%;
        }

        .zombies-container {
            position: relative;
            width: 80vw;
            height: 80vw;
            max-width: 100%;
            max-height: 100%;
            background: url('/static/images/background.png') no-repeat center center;
            background-size: cover;
        }

        .zombies-container img {
            position: absolute;
            width: 10%;
            height: auto;
        }

        .hidden {
            display: none;
        }

        .zombie {
            position: absolute;
        }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
    <script>
        const socket = io();

        socket.on('display_target', () => {
            document.querySelector('.target-container').style.display = 'block';
            document.querySelector('.zombies-container').style.display = 'none';

            // Add score information to the target container
            const scoreContainer = document.createElement('div');
            scoreContainer.classList.add('score-container');
            document.querySelector('.target-container').appendChild(scoreContainer);
        });

        socket.on('display_zombies', () => {
            document.querySelector('.target-container').style.display = 'none';
            document.querySelector('.zombies-container').style.display = 'block';

            const zombiesContainer = document.querySelector('.zombies-container');
            zombiesContainer.innerHTML = ''; // Clear any existing zombies

            for (let i = 1; i <= 11; i++) {
                const zombieId = `zombie${i}`;
                // zombieElement.classList.add('zombie');
                const newZombieElement = document.createElement('img');
                newZombieElement.src = `/static/images/zombie${i}.png`;
                newZombieElement.id = zombieId;
                newZombieElement.classList.add('zombie-'+i);
                console.log('zombie-'+i)

                // Randomly position the zombies
                const randomTop = Math.random() * 90; // Random top position (0-90%)
                const randomLeft = Math.random() * 90; // Random left position (0-90%)
                newZombieElement.style.top = `${randomTop}%`;
                newZombieElement.style.left = `${randomLeft}%`;

                zombiesContainer.appendChild(newZombieElement);
            }
        });

        socket.on('hide_all', () => {
            document.querySelector('.target-container').style.display = 'none';
            document.querySelector('.zombies-container').style.display = 'none';
        });

        socket.on('update_zombies', (data) => {
            const playerZombies = data.zombies;
            const zombiesContainer = document.querySelector('.zombies-container');
            zombiesContainer.innerHTML = ''; // Clear existing zombies

            playerZombies.forEach(zombieNumber => {
                const zombieElement = document.createElement('img');
                zombieElement.src = `/static/images/zombie${zombieNumber}.png`;
                zombieElement.classList.add('zombie');
                zombieElement.classList.add('zombie-'+zombieNumber);
                console.log('zombie-'+zombieNumber)
                zombieElement.style.top = `${Math.random() * 90}%`;
                zombieElement.style.left = `${Math.random() * 90}%`;
                zombiesContainer.appendChild(zombieElement);
            });
        });

        socket.on('remove_zombie', (zombie_number) =>{
            var zombieElement = document.getElementsByClassName("zombie-"+zombie_number)[0]
            zombieElement.remove()
        });

        
        

    </script>
</head>
<body>
    <div class="target-container">
        <div class="bullseye"></div>
        <div class="clutch left"></div>
        <div class="clutch right"></div>
    </div>
    <div class="zombies-container" style="display: none;">
        {% for i in range(1, 11) %}
          <img src="/static/images/zombie{{ i }}.png" class="zombie" id="zombie{{ i }}">
          
          
        {% endfor %}
    </div>
    <div class="target-container"></div>
    <div class="zombies-container"></div>
</body>
</html>
